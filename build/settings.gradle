/*
 * This file was generated by the Gradle 'init' task.
 */


rootProject.name = 'build'

//Utils
//Default modules initialization
include(':utils')
include(':apibase')

project(':utils').projectDir = file('../utils')
project(':apibase').projectDir = file('../apibase')



final String[] microservicesModules = ["ats", "cds", "cis", "edc", "fms", "nts"]
final String[] webModules = ["cid", "cia", "cir"]
final String[] utilsModules = []
final String[] specificModules = []


Map<String, String[]> buildConfigurations = new HashMap<String, String[]>() {
    {
        put("microservices", microservicesModules)
        put("web", webModules)
        put("web", utilsModules)
        put("web", specificModules)
    }
}


final String configuration = System.getProperty("conf");

if (configuration != null) {
    final String[] buildModules = buildConfigurations.get(configuration);

    for (int i = 0; i < buildModules.length; i++) {
        String moduleName = buildModules[i];

        println("Building module: " + moduleName)

        include(String.format(":%s:%s", configuration, moduleName))
        project(String.format(":%s:%s", configuration, moduleName)).projectDir = file(String.format("../%s/%s", configuration, moduleName))
    }
} else {

    //Microservices

    include(':microservices:ats')
    include(':microservices:cds')
    include(':microservices:cis')
    include(':microservices:edc')
    include(':microservices:fms')
    include(':microservices:nts')

    project(':microservices:ats').projectDir = file('../microservices/ats')
    project(':microservices:cds').projectDir = file('../microservices/cds')
    project(':microservices:cis').projectDir = file('../microservices/cis')
    project(':microservices:edc').projectDir = file('../microservices/edc')
    project(':microservices:fms').projectDir = file('../microservices/fms')
    project(':microservices:nts').projectDir = file('../microservices/nts')

    //Web
    include ':web:cia'
    include ':web:cid'
    include ':web:cir'
    include ':web:cidapp'

    project(':web:cid').projectDir = file('../web/cid')
    project(':web:cia').projectDir = file('../web/cia')
    project(':web:cir').projectDir = file('../web/cir')
    project(':web:cidapp').projectDir = file('../web/cidapp')


//    include(':apitests')
//    include(':ciconnect')
//    include(':cid')
//    include(':cir')
//    include(':cas')
//    include(':cia')
//    include(':cidapp')
//
//    project(':apitests').projectDir = file('../apitests')
//    project(':ciconnect').projectDir = file('../ciconnect')
//    project(':cid').projectDir = file('../cid')
//    project(':cir').projectDir = file('../cir')
//    project(':cia').projectDir = file('../cia')
//    project(':cas').projectDir = file('../cas')
//    project(':cidapp').projectDir = file('../cidapp')


    if (System.getProperty("all") != null) {
        include(':database')
        project(':database').projectDir = file('../db')
    }
}
include '../web/cid'
findProject(':../web/cid')?.name = 'cid'

