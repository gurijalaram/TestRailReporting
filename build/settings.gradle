/*
 * This file was generated by the Gradle 'init' task.
 */


rootProject.name = 'build'

//Utils
//Default modules initialization
include(':utils')
include(':apibase')

project(':utils').projectDir = file('../utils')
project(':apibase').projectDir = file('../apibase')

final String[] microservicesModules = ["acs-api", "ats-api", "cas-api", "cds-api", "cid-api", "cidapp-api", "css-api", "bcs-api", "edc-api", "fms-api", "nts-api", "vds-api", "sds-api", "cis-api", "integration"]
final String[] webModules = ["auth-ui", "cas-ui", "cia-ui", "ciconnect-ui", "cidapp-ui", "cir-ui", "edc-ui", "cis-ui"]

Map<String, String[]> buildConfigurations = new HashMap<String, String[]>() {
    {
        put("microservices", microservicesModules)
        put("web", webModules)
    }
}

final String configuration = System.getProperty("conf");

if (configuration != null) {
    final String[] buildModules = buildConfigurations.get(configuration);

    for (int i = 0; i < buildModules.length; i++) {
        final String moduleName = buildModules[i];

        println("Building module: " + moduleName)
        includeProject(String.format(":%s:%s", configuration, moduleName), String.format("../%s/%s", configuration, moduleName))
    }

} else {

    //Microservices

    include(':microservices:acs-api')
    include(':microservices:ats-api')
    include(':microservices:cas-api')
    include(':microservices:cds-api')
    include(':microservices:cid-api')
    include(':microservices:cidapp-api')
    include(':microservices:css-api')
    include(':microservices:bcs-api')
    include(':microservices:edc-api')
    include(':microservices:fms-api')
    include(':microservices:nts-api')
    include(':microservices:vds-api')
    include(':microservices:sds-api')
    include(':microservices:integration')
    include(':microservices:cis-api')

    project(':microservices:acs-api').projectDir = file('../microservices/acs-api')
    project(':microservices:ats-api').projectDir = file('../microservices/ats-api')
    project(':microservices:cas-api').projectDir = file('../microservices/cas-api')
    project(':microservices:cid-api').projectDir = file('../microservices/cid-api')
    project(':microservices:cidapp-api').projectDir = file('../microservices/cidapp-api')
    project(':microservices:css-api').projectDir = file('../microservices/css-api')
    project(':microservices:cds-api').projectDir = file('../microservices/cds-api')
    project(':microservices:bcs-api').projectDir = file('../microservices/bcs-api')
    project(':microservices:edc-api').projectDir = file('../microservices/edc-api')
    project(':microservices:fms-api').projectDir = file('../microservices/fms-api')
    project(':microservices:nts-api').projectDir = file('../microservices/nts-api')
    project(':microservices:vds-api').projectDir = file('../microservices/vds-api')
    project(':microservices:sds-api').projectDir = file('../microservices/sds-api')
    project(':microservices:integration').projectDir = file('../microservices/integration')
    project(':microservices:cis-api').projectDir = file('../microservices/cis-api')

    //Web
    include ':web:auth-ui'
    include ':web:cia-ui'
    include ':web:cir-ui'
    include ':web:cidapp-ui'
    include ':web:ciconnect-ui'
    include ':web:cas-ui'
    include ':web:edc-ui'
    include ':web:cis-ui'

    project(':web:auth-ui').projectDir = file('../web/auth-ui')
    project(':web:cia-ui').projectDir = file('../web/cia-ui')
    project(':web:cir-ui').projectDir = file('../web/cir-ui')
    project(':web:cidapp-ui').projectDir = file('../web/cidapp-ui')
    project(':web:ciconnect-ui').projectDir = file('../web/ciconnect-ui')
    project(':web:cas-ui').projectDir = file('../web/cas-ui')
    project(':web:edc-ui').projectDir = file('../web/edc-ui')
    project(':web:cis-ui').projectDir = file('../web/cis-ui')

    if (System.getProperty("all") != null) {
        include(':database')
        project(':database').projectDir = file('../db')
    }
}

void includeProject(final String includePath, final String filePath) {
    include(includePath)
    project(includePath).projectDir = file(filePath)
}

