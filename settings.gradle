/*
 * This file was generated by the Gradle 'init' task.
 */

//Utils
//Default modules initialization
include(':utils')
include(':apibase')
include(':db')

final String[] microservicesModules = ["acs-api", "ats-api", "cas-api", "cds-api", "cidapp-api", "cir-api", "css-api",
                                       "bcs-api", "edc-api", "fms-api", "nts-api", "vds-api", "sds-api", "cis-api",
                                       "cic-api","qds-api", "dds-api", "qms-api", "dms-api", "cus-api", "ach-api"]
final String[] webModules = ["auth-ui", "cas-ui", "cia-ui", "ciconnect-ui", "cidapp-ui", "cir-ui", "edc-ui", "cis-ui"]
final String[] intModules = ["integration"]
final String[] agentModules = ["cic-agent"]

Map<String, String[]> buildConfigurations = new HashMap<String, String[]>() {
    {
        put("microservices", microservicesModules)
        put("web", webModules)
        put("integration", intModules)
        put("agent", agentModules)
    }
}
final String configuration = System.getProperty("conf")

if (configuration != null) {
    final String[] buildModules = buildConfigurations.get(configuration)

    for (int i = 0; i < buildModules.length; i++) {
        final String moduleName = buildModules[i]

        println("Building module: " + moduleName)
        includeProject(String.format(":%s:%s", configuration, moduleName), String.format("../%s/%s", configuration, moduleName))
    }

} else {

    //Microservices
    include(':microservices:acs-api')
    include(':microservices:ats-api')
    include(':microservices:cas-api')
    include(':microservices:cds-api')
    include(':microservices:cidapp-api')
    include(':microservices:cir-api')
    include(':microservices:css-api')
    include(':microservices:bcs-api')
    include(':microservices:edc-api')
    include(':microservices:fms-api')
    include(':microservices:nts-api')
    include(':microservices:vds-api')
    include(':microservices:sds-api')
    include(':microservices:cis-api')
    include(':microservices:cic-api')
    include(':microservices:qds-api')
    include(':microservices:dds-api')
    include(':microservices:dms-api')
    include(':microservices:qms-api')
    include(':microservices:cus-api')
    include(':microservices:ach-api')

    //Web
    include ':web:auth-ui'
    include ':web:cia-ui'
    include ':web:cir-ui'
    include ':web:cidapp-ui'
    include ':web:ciconnect-ui'
    include ':web:cas-ui'
    include ':web:edc-ui'
    include ':web:cis-ui'

    //integration
    include ':integration'
    include ':agent:cic-agent'
}

void includeProject(final String includePath, final String filePath) {
    include(includePath)
    project(includePath).projectDir = file(filePath)
}

