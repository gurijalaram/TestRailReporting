{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "required": [
    "response"
  ],
  "properties": {
    "response": {
      "type": "object",
      "required": [
        "isFirstPage",
        "isLastPage",
        "pageNumber",
        "pageSize",
        "pageItemCount",
        "totalItemCount",
        "totalPageCount",
        "hasNextPage",
        "hasPreviousPage",
        "items"
      ],
      "properties": {
        "isFirstPage": {
          "type": "boolean"
        },
        "isLastPage": {
          "type": "boolean"
        },
        "pageNumber": {
          "type": "integer"
        },
        "pageSize": {
          "type": "integer"
        },
        "pageItemCount": {
          "type": "integer"
        },
        "totalItemCount": {
          "type": "integer"
        },
        "totalPageCount": {
          "type": "integer"
        },
        "hasNextPage": {
          "type": "boolean"
        },
        "hasPreviousPage": {
          "type": "boolean"
        },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "identity",
              "createdAt",
              "createdBy",
              "subjectIdentity",
              "permissions",
              "customerIdentity",
              "active",
              "annualVolume",
              "batchesPerYear",
              "description",
              "location",
              "name",
              "ownerType",
              "productionLife",
              "useType",
              "vpeType",
              "processGroupAssociations"
            ],
            "properties": {
              "identity": {
                "type": "string"
              },
              "createdAt": {
                "type": "string"
              },
              "createdBy": {
                "type": "string"
              },
              "subjectIdentity": {
                "type": "string"
              },
              "permissions": {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "type": "string"
                    }
                  ]
                }
              },
              "customerIdentity": {
                "type": "string"
              },
              "active": {
                "type": "boolean"
              },
              "annualVolume": {
                "type": "integer"
              },
              "batchesPerYear": {
                "type": "number"
              },
              "description": {
                "type": "string"
              },
              "location": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "ownerType": {
                "type": "string"
              },
              "productionLife": {
                "type": "number"
              },
              "revision": {
                "type": "string"
              },
              "useType": {
                "type": "string"
              },
              "vpeType": {
                "type": "string"
              },
              "processGroupAssociations": {
                "type": "object",
                "allOf": [
                  {
                    "if": {
                      "properties": {
                        "name": {
                          "const": "aPriori PCBA"
                        }
                      },
                      "required": [
                        "User Guided",
                        "Assembly"
                      ]
                    },
                    "then": {
                      "properties": {
                        "Assembly": {
                          "type": "object",
                          "required": [
                            "processGroupIdentity"
                          ],
                          "properties": {
                            "processGroupIdentity": {
                              "type": "string"
                            }
                          }
                        },
                        "User Guided": {
                          "type": "object",
                          "required": [
                            "processGroupIdentity"
                          ],
                          "properties": {
                            "processGroupIdentity": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  },
                  {
                    "else": {
                      "required": [
                        "Composites",
                        "Casting - Die",
                        "Machining",
                        "Additive Manufacturing",
                        "Powder Metal",
                        "Forging",
                        "Sheet Plastic",
                        "Heat Treatment",
                        "User Guided",
                        "Sheet Metal - Hydroforming",
                        "Bar & Tube Fab",
                        "Assembly",
                        "Sheet Metal - Transfer Die",
                        "Sheet Metal",
                        "Assembly Molding",
                        "Casting - Sand",
                        "Rapid Prototyping",
                        "Casting",
                        "Plastic Molding",
                        "Part Assembly",
                        "Stock Machining",
                        "Surface Treatment",
                        "Roto & Blow Molding",
                        "Other Secondary Processes",
                        "Sheet Metal - Stretch Forming",
                        "2-Model Machining"
                      ],
                      "then": {
                        "properties": {                   "Composites": {
                          "type": "object",
                          "required": [
                            "processGroupIdentity"
                          ],
                          "properties": {
                            "processGroupIdentity": {
                              "type": "string"
                            }
                          }
                        },
                          "Multi-Spindle Machining": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Casting - Die": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Machining": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Additive Manufacturing": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Powder Metal": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Forging": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Sheet Plastic": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Heat Treatment": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "User Guided": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Sheet Metal - Hydroforming": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Bar & Tube Fab": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Assembly": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Casting - Investment": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Sheet Metal - Transfer Die": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Assembly Plastic Molding": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Sheet Metal": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "PCB": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Assembly Molding": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Casting - Sand": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Rapid Prototyping": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Casting": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Plastic Molding": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Part Assembly": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Stock Machining": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Surface Treatment": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Roto & Blow Molding": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Other Secondary Processes": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "Sheet Metal - Stretch Forming": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          },
                          "2-Model Machining": {
                            "type": "object",
                            "required": [
                              "processGroupIdentity"
                            ],
                            "properties": {
                              "processGroupIdentity": {
                                "type": "string"
                              }
                            }
                          }

                        }
                      }
                    }
                  }
                ]
              }
            }
          }
        }
      }
    }
  }
}